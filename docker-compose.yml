version: '3'
services:
  userservice:
    build: .
    container_name: userservice
    links:
      - mongodb
    networks:
      - user-service-backend
    ports:
      - "3000:3000"

  mongodb:
      image: mongo:latest
      container_name: mongodb
      environment:
        - MONGO_INITDB_ROOT_USERNAME=root
        - MONGO_INITDB_ROOT_PASSWORD=password123
        - MONGO_INITDB_DATABASE=emp_database
      hostname: mongodb
      networks:
        - user-service-backend
      ports:
        - 27017:27017
      volumes:
        - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro

networks:
  user-service-backend:
    driver: bridge
